<apex:page controller="BMCServiceDesk.AdminSelfServiceController" showHeader="false" standardStylesheets="false" action="{!AdminSelfServiceGeneralInit}"  id="pg" >


 <link rel="stylesheet" type="text/css" href="{!$Resource.SDEFStyles}/AdminSSIncident.css" id="incidentCSS"/> 
 <link rel="stylesheet" type="text/css" href="{!$Resource.SDEFExtJS}/resources/css/ext-all.css" id="ext-all-css"/>
 <link rel="Stylesheet" type="text/css" href="{!$Resource.SDEFStyles}/HelpStyles.css" />
 

<style>

	.clsheaderalign{
	
	*margin-left:19px;
	margin-left:10px\0/;
	color: #004376;
	font-size: 10pt;
	font-weight: bold;
	font-family: arial;
	}
	.clsURLalign{
	
	*margin-left:19px;
	margin-left:10px\0/;
	
	}
	label{
		margin-right:5px;
		vertical-align: top;
	}
    .x-small-editor
	{
		width:100% !important;
	}
    .x-toolbar{
		 background-image:none !important;
		 background-color: #DEE0E0 !important;
    }
    .clsMarginLeft{
    	margin-left:3px;
    	 margin-left:14px\9;
    	margin-left:15px\0;
    	*margin-left:25px;
    }
    #saveBtn {
    	margin-left:10px !important;
    }
    .clsMainContainer{
    	margin-left:7px\9 !important;
    	*margin-left:0px !important;
    }
</style>
    <apex:form id="form">
    	<div id = "btnToolbar"></div>
    	<div id="helpDiv" class="clshelpDiv"></div>
    	<apex:outputPanel id="mainPanel"  styleClass="ClsContainer">
    		<div Class="clsMainContainer">
    		
	    		<table class="MainDiv">
	    			<apex:outputText rendered="{!(!isSSSwitchNewUI)}">               
		                <tr>                       
							<td class="clsInputCheckBox" align="right" ><apex:inputCheckbox id="switchToNewUI" value="{!isSSSwitchNewUI}"/></td>
							<td><apex:outputLabel value="{!$Label.BMCServiceDesk__SwitchToNewSSUI}"  styleClass="clsInputCheckBoxLabel"/></td> 
						</tr>
						<tr><td class="clsTRHeight"></td><td></td></tr>
						<tr>
							<td class="clsInputCheckBox" align="left" colspan="2">
											<apex:outputLabel value="{!$Label.BMCServiceDesk__DefaultView}" styleClass="clsInputradioLabel clsMarginLeft"/>
								
											<apex:selectRadio value="{!selectedDefaultView}" styleClass="clsInputCheckBoxLabel"  id="defaultview" >
												<apex:selectOptions value="{!defaultView}"  />
											</apex:selectRadio>
								</td>
						</tr>
						<tr><td class="clsTRHeight"></td><td></td></tr>
					</apex:outputText>
					
					<tr>
						<td class="clsInputCheckBox" align="right">
							<apex:inputCheckbox value="{!selfServiceBean.KnowledgeArticlehasPriority}" />
							</td>
							<td><apex:outputLabel value="{!$Label.BMCServiceDesk__KnowledgeArticlehasPriority}" styleClass="clsInputCheckBoxLabel"/></td>
					</tr>
					<tr><td class="clsTRHeight"></td><td></td></tr>
					
					<apex:outputText rendered="{!(isSSSwitchNewUI)}">
						<tr>
							<td class="clsInputCheckBox" align="right" >
								<apex:inputCheckbox id="Enable_Auto_Suggestion" value="{!selfServiceBean.EnableAutoSuggestion}"/>
								</td><td>
								<apex:outputLabel value="{!$Label.BMCServiceDesk__ShowKSnSRonCS}" styleClass="clsInputCheckBoxLabel"/>
							</td>
						</tr>
						<tr><td class="clsTRHeight"></td></tr>
					</apex:outputText>
						<tr> <td class="clsInputCheckBox" align="right" > 
								<apex:inputCheckbox id="showTasks" value="{!selfServiceBean.ShowTaskStatus}" onclick="disableTaskFieldSet();"/> </td>
								<td> <apex:outputLabel value="{!$Label.BMCServiceDesk__SSShowTaskStatus}" styleClass="clsInputCheckBoxLabel"/> </td>
						</tr>
                        <tr><td class="clsTRHeight"></td></tr>
					 		<tr >
                                <td></td><td> <apex:outputLabel value="{!$Label.BMCServiceDesk__SSTaskFieldset}" styleClass="clsInputCheckBoxLabel"/><br/>
                                 </td>
                          </tr>
                                 <tr><td class="clsTRHeight"></td></tr>
                                <tr><td></td><td> <div id="taskfields">
                                 </div> </td> </tr>
							<tr><td class="clsTRHeight"></td></tr>
					<tr>
                        <td class="clsInputCheckBox" colspan="2" align="left">
                            <apex:outputLabel value="{!$Label.BMCServiceDesk__ssURL}" styleClass="clsURLalign"/>
							<apex:inputText id="txtSSURL"  style="width:350px"   styleClass="clsInputSiteURl" value="{!selfServiceBean.SiteURL}"/>
						</td>
						<tr><td class="clsTRHeight"></td></tr>
					</tr>
                </table>
				</div>
				<div class="clsLeftPadd">
                    <apex:outputPanel rendered="{!isSSSwitchNewUI}" layout="none">
                        <table>
                        <tr>
                        <td class="clsInputCheckBox" colspan="2" align="left">
                            <apex:outputLabel value="{!$Label.BMCServiceDesk__OnBehalfOf_header}" styleClass="clsheaderalign"/>
                            </td>
                        </tr>
                        <tr><td class="clsTRHeight"></td></tr>
                        <tr>
                            <td class="clsInputCheckBox" align="right" >
                                <apex:inputCheckbox id="Submit_for_lower_role" value="{!selfServiceBean.SubmitTicketForBelowRole}"/>
                            </td>
                            <td>
                                <apex:outputLabel value="{!$Label.BMCServiceDesk__SubmitTicketForLowerRole}" styleClass="clsInputCheckBoxLabel"/>
                            </td>
                        </tr>
                        <tr><td class="clsTRHeight"></td></tr>
                         <tr>
                            <td class="clsInputCheckBox" align="right" >
                                <apex:inputCheckbox id="Submit_for_same_account" value="{!selfServiceBean.SubmitTicketForSameAccount}"/>
                            </td>
                            <td>
                                <apex:outputLabel value="{!$Label.BMCServiceDesk__SubmitTicketForSameAccount}" styleClass="clsInputCheckBoxLabel"/>
                            </td>
                        </tr>
                        <tr><td class="clsTRHeight"></td></tr>
                         <tr>
                            <td class="clsInputCheckBox" align="right" >
                                <apex:inputCheckbox id="Submit_for_all_users" value="{!selfServiceBean.SubmitTicketForAllUsers}" onClick="DisableOtherOnBehalfOfSettings(AllUserCheckbox)"/>
                            </td>
                            <td>
                                <apex:outputLabel value="{!$Label.BMCServiceDesk__SubmitTicketForAllUsers}" styleClass="clsInputCheckBoxLabel"/>
                            </td>
                        </tr>
                        <tr><td class="clsTRHeight"></td></tr>
                        </table>
                    </apex:outputPanel>
                </div>
                <div class="clsLeftPadd">
					
					<apex:outputPanel rendered="{!isSSSwitchNewUI}" layout="none">
					<table>
						<tr>
                        <td class="clsInputCheckBox" colspan="2" align="left">
                            <apex:outputLabel value="{!$Label.BMCServiceDesk__Chat_Header}" styleClass="clsheaderalign"/>
							</td>
						</tr>
						<tr><td class="clsTRHeight"></td></tr>
						<tr>
							<td class="clsInputCheckBox" align="right" >
								<apex:inputCheckbox id="Enable_Chat" value="{!selfServiceBean.EnableChat}" onClick="ChangeValueOfChild(EnableChatCheckbox);" />
							</td>
							<td>
								<apex:outputLabel value="{!$Label.BMCServiceDesk__Chat_Setting}" styleClass="clsInputCheckBoxLabel"/>
							</td>
						
							<td class="clsInputCheckBox" align="right" style="padding-left: 35px;">
								<apex:inputCheckbox id="EnableChatforMobile" value="{!selfServiceBean.EnableChatForMobile}" onClick="ChangeValueOfChild(EnableChatforMobile);"/>
							</td>
							<td>
								<apex:outputLabel value="{!$Label.BMCServiceDesk__SF1AdminChatSetting}" styleClass="clsInputCheckBoxLabel"/>
							</td>
							
						</tr>
						
						<tr> <td class="clsTRHeight"></td></tr>
                        <tr >
                            <td class="Seprator"></td>
                            <td>
                                <input type="radio" value="AllAccounts" name="selectRadio" id="RFChatAcc:1" onClick="AllAccountsChat();" />
                                <apex:outputLabel value="{!$Label.BMCServiceDesk__AllAccountsEntitlement}" styleClass="clsInputCheckBoxLabel" />
                            </td>
                        </tr>
                        <tr><td class="clsTRHeight"></td></tr>
                        <tr >
                            <td class="Seprator"></td>
                            <td>
                                <input type="radio" value="SelectedAccounts"  name="selectRadio" id="RFChatAcc:2" onClick="radioSelectedAccounts();" />
								<apex:outputLabel value="{!$Label.BMCServiceDesk__SelectedAccounts}" styleClass="clsInputCheckBoxLabel" />
                            </td>
                        </tr>
                </table>
				
				<table>
                        <tr><td class="clsTRHeight"></td></tr>
                        <tr>
							<td width="30px"></td>
							<td id="multiSelectBox" style="width: 175px;">
								<select  id="SelectedAccountId" size="8" class="clsAccountTextareaDisable" >
								 </select>
							</td>
							<td id="multiSelectBoxBtn"  dir="ltr" style=" vertical-align: top; " >
                                    <img id ="selectAccountLookupId" class="lookupIcon" 
									   onmouseover="this.className = 'lookupIconHover';this.className = 'lookupIconHover';" title = "{!JSENCODE($Label.RFChatSelectedAccount)}"
										   onmouseout="this.className = 'lookupIcon';this.className = 'lookupIcon';" onclick="openAccountSelectWindow();return false;" 
									   onfocus="this.className = 'lookupIconHover';" onblur="this.className = 'lookupIcon';"  src="/s.gif" style="opacity : 0.4 ; filter: alpha(opacity=40); " />
							</td>   
                        </tr>
                </table>
                        
                <table>
                        <tr><td class="clsTRHeight"></td></tr>
					 	<tr >
                            <td class="Seprator"></td>
							<td>
                                <apex:inputCheckbox id="Enable_PreChat" value="{!selfServiceBean.EnablePreChat}" onclick="ChangePreChatCategoryCheckbox(PreChatCheckbox);"/>
								<apex:outputLabel value="{!$Label.BMCServiceDesk__EnablePreChatform}" styleClass="clsInputCheckBoxLabel"/>
							</td>
						
						</tr>
                        <tr><td class="clsTRHeight"></td></tr>
						<tr>
                            <td class="Seprator"></td>
                            <td class="clsLeftPadd">
								<apex:inputCheckbox id="PreChatCategory" value="{!selfServiceBean.EnableDefaultCategory}" title="{!$Label.BMCServiceDesk__ShowCategoryOnPrechatFormTooltip}"/>
								<apex:outputLabel value="{!$Label.BMCServiceDesk__ShowCategoryOnPrechatForm}" styleClass="clsInputCheckBoxLabel"/>
							
							</td>
							
						</tr>
				 </table>		
					</apex:outputPanel>
				
    	 	</div>
    	 	<script>               
	               var message = '{!JSENCODE(messageString)}';                  
	           </script>
    	</apex:outputPanel>
        <apex:actionfunction name="save" action="{!AdminSelfServiceGeneralSave}" rerender="mainPanel,RFChatPanel" onComplete="waitbox.hide(); showErrorMsg(); disableChild(EnableChatCheckbox,PreChatCheckbox); showComboBox();disableTaskFieldSet();DisableOtherOnBehalfOfSettings(AllUserCheckbox)" >
			<apex:param assignTo="{!csvAccountID}" name="csvAccountListparam" value=""/>
			<apex:param assignTo="{!selectedTaskFieldset}" name="selectedTaskFieldset" value=""/>
		</apex:actionfunction>
        <apex:actionfunction name="reset" action="{!AdminSelfServiceGeneralInit}" rerender="mainPanel,RFChatPanel" onComplete="waitbox.hide(); " ></apex:actionfunction>
    	
    	<script type="text/javascript" src="{!$Resource.SDEFExtJS}/adapter/ext/ext-base.js" id="ext-base-js"/>
		<script type="text/javascript" src="{!$Resource.SDEFExtJS}/ext-all.js" id="ext-all-js"/>
    	<script type="text/javascript" src="{!$Resource.SDEFCommonJS}/JSCommon.js" />
    	<script type="text/javascript" src="{!$Resource.SDEFExtJS}/ex/ux/SliderTip.js"/>
    	<script>
    		var invalidSSURLLabel			= '{!JSENCODE($Label.invalidSelfServiceURL)}';
    		var saveLabel 					= '{!JSENCODE($Label.save)}';
    		var undoDefaultSettingPageLabel	= '{!JSENCODE($Label.Reset)}';
    		var urlsaveimage 				= '{!$Resource.SDEFStyles}/SDEFbuttons/b_pick.gif';
    		var newSelfServiceUI 			= '{!JSENCODE($Component.form.switchToNewUI)}';
    		var confirmLabel 				= '{!JSENCODE($Label.ConfirmHomePage)}';
    		var confirmNewSSUILabel 		= '{!JSENCODE($Label.ConfirmNewSSUI)}';
    		var helpLabel 					= '{!JSENCODE($Label.TooltipHelp)}';
	    	var txtSSURLvar 				= '{!$Component.pg.form.txtSSURL}';
	    	var SaveMsgHeader 				= '{!JSENCODE($Label.GeneralSelfServiceSettings)}';
	    	var helpLink					= parent.getStdFormHelpPath()+'/new_self_service_UI_migration.htm';
	    	var waitImg 					= '{!$Resource.SDEFExtJS}/resources/images/default/shared/blue-loading.gif'; 
	    	var PreChatCheckbox				= '{!$Component.Enable_PreChat}';
	    	var PreChatCategoryCheckbox 	= '{!$Component.PreChatCategory}';
	    	var EnableChatCheckbox			= '{!$Component.Enable_Chat}';
	    	var EnableChatforMobile			= '{!$Component.EnableChatforMobile}';
	    	var showTaskFieldsets			= '{!$Component.pg.form.showTasks}';
	    	var waitbox;
			var wikiUrl='{!wikiUrl}';
			var AccountSelectorPage = '{!$Page.AccountSelector}';
			var taskFieldsets='{!taskFieldsets}';
			var selectedTaskFieldset = '{!selfServiceBean.taskFieldSetValue}';
			var AllUserCheckbox             = '{!$Component.Submit_for_all_users}';
            var SameAccountCheckbox         = '{!$Component.Submit_for_same_account}';
            var BelowHierarchyCheckbox      = '{!$Component.Submit_for_lower_role}';
    	</script>
		
        
        
        <script type="text/javascript" src="{!$Resource.SDEFCommonJS}/AdminSelfServiceGeneral.js" />
		<apex:outputPanel id="RFChatPanel" >
        <script>
          var AllAccountForChat = {!ChatEnabledForAllAccount};
          var listData = {!accountJSON};
          var EnableChat = {!selfServiceBean.EnableChat};
		  initAccountList();
        </script>
        </apex:outputPanel>
		
		<script type="text/javascript" src="{!$Resource.SDEFCommonJS}/WikiHelp.js" />
	</apex:form>
</apex:page>