<apex:page controller="BMCServiceDesk.SSEditThemePageController" standardStylesheets="false" showHeader="false" sidebar="false">
    <head><title>{!$Label.EditTheme}</title></head> 
	<apex:includeScript value="{!$Resource.BMCServiceDesk__ExtJS4_1_3}/ext-all.js" id="ext-all-js"/>
    <link rel="stylesheet" type="text/css" href="{!$Resource.ExtJS4_1_3}/resources/css/ext-all.css" id="ext-all-css"/> 
    <link rel="Stylesheet" type="text/css" href="{!$Resource.SDEFStyles}/HelpStyles.css" />
    <script type="text/javascript" src="{!$Resource.jscolor}/jscolor.js"></script>
    <script type="text/javascript" src="{!$Resource.SDEFCommonJS}/SSEditThemePage.js" ></script>
    <link rel="Stylesheet" type="text/css" href="{!$Resource.SDEFStyles}/SSEditThemePage.css" />
   
    <script>
    var themeName = '{!JSENCODE(themeName)}';
    var themeData = '{!JSENCODE(themeData)}';
    var colorMap = JSON.parse('{!JSENCODE(themeData)}'); 
    var selectedComponentId = '';
    var selectedComponent ='';
    var jsonToken = '';
    var finalJson = '';
    var isThemeAssigned ='{!isThemeAssignedFlag}';
    var userLanguage = '{!userLanguage}';
    var tooltipLegendImgSrc;
    var LegendToolTip = null;
    var LegendImgSrc = "{!$Resource.SDEFStyles}/SDEFbuttons/b_change_schedule_legend.png";
    var SaveLbl = '{!JSENCODE($Label.save)}';
	var Delete = '{!JSENCODE($Label.Delete)}';
    var ThemeDeleteValidationMsg = '{!JSENCODE($Label.ThemeDeleteValidationMsg)}';
    var Theme_Config = '{!JSENCODE($Label.Theme_Config)}';
    var Theme_Saved = '{!JSENCODE($Label.Theme_Saved)}';
    var ThemeDelete = '{!JSENCODE($Label.ThemeDelete)}';
    var themeInvalidColorCodeMessage = '{!JSENCODE($Label.ThemeInvalidColorCodeMessage)}';
	var Theme_Name_Required = '{!JSENCODE($Label.Theme_Name_Required)}';
	var Theme_Name_Length = '{!JSENCODE($Label.Theme_Name_Length)}';
	
    var clist = {!componentData};
    
    var imgPath= '{!$Resource.SSjs}/SSTemplateTheme' + '/BMCRFimages_en/branding_legend_toolTip.png';
    if (userLanguage == 'ja')
    {
        imgPath= '{!$Resource.SSjs}/SSTemplateTheme' + '/BMCRFimages_ja/branding_legend_toolTip.png';
    }
    else if(userLanguage == 'de')
    {
        imgPath= '{!$Resource.SSjs}/SSTemplateTheme' + '/BMCRFimages_de/branding_legend_toolTip.png';
    }
    else if(userLanguage == 'fr')
    {
        imgPath= '{!$Resource.SSjs}/SSTemplateTheme' + '/BMCRFimages_fr/branding_legend_toolTip.png';
    }
    else if(userLanguage == 'es')
    {
        imgPath= '{!$Resource.SSjs}/SSTemplateTheme' + '/BMCRFimages_es/branding_legend_toolTip.png';
    }
    
    </script>
    
    <apex:form id="CreateTheme">
        <div id="btnToolbar" width="100%"></div>
        <div id="helpDiv" class="clshelpDiv"></div>
        <table width="85%" style="margin-left:10px">
           <tr>
               <td><div style="margin-top:20px;"></div></td>
           </tr>
           <tr>
               <td><div style="margin-top:10px;"><span class='editThemeTitle'>{!JSENCODE($Label.Theme_Name)}</span>:&nbsp;&nbsp;<input type="text" id="themeNameTxt" value="{!themeName}"/></div></td>
           </tr>
            <tr>
               <td><div style="margin-top:20px;"></div></td>
           </tr>
           <tr class="editThemeTitle">
               <td>
                <div style="float:left;margin-top:5px">{!JSENCODE($Label.User_Interface_Elements)}:</div>
                <div style="float:right;margin-right:19px;margin-bottom:5px"><img id="legendIcon"  src="{!$Resource.SDEFStyles}/SDEFbuttons/b_change_schedule_legend.png" onmouseover="showLegendTip(this);" /></div>
               </td>
               <td>{!JSENCODE($Label.Element_Color)}:</td>
           </tr>
           <tr style="height:100%;">
               <td style="height:200px;width:340px"><div id="gridDiv" style="height:100%;"></div></td>
               <td valign="top" style="height:100%;">
                    <table width="50%" style="height:100%;border-style:solid;border-width:1px;border-color:#BBC4BD">
           <tr>
                            <td width="10%">
                                <div style="margin-top:15px;margin-left:15px;width:100%"><img id="colorPickerIcon"  src="{!$Resource.SDEFStyles}/SDEFicons/icon_color_picker.png" title="{!JSENCODE($Label.ColorPickerIconToolTip)}"/></div>
							</td>
							<td width="90%">
                                <div style="margin-top:15px;">
                                   <input id="colorTxt" class="color {pickerPosition:'right'}" value="FFFFFF" style="height:20px;width:65px" onchange="populateColorCodes();" disabled="true"/>
                               </div>
                            </td>
                                   </tr>
                                    <tr>
                            <td colspan="2">
                                <div style="margin-top:25px;margin-left:43px;">{!JSENCODE($Label.New)}</div>
                                <table id="innerTable" border="1" width="70px" style="margin-left:25px;">
                                    <tr>
                                       <td height="25px" id="NewColor"></td>
                                    </tr>
                                    <tr height="25px">
                                       <td id="CurrentColor"></td>
                                    </tr>
                                </table>
                                <div style="margin-left:40px;margin-bottom:20px">{!JSENCODE($Label.Current_Color)}</div>
                           </td>
                        </tr>
                        <tr>
                            <td colspan="2" width="100%" style="background:#E0E0E0">
                                <div style="margin-top:7px;margin-left:15px;margin-bottom:7px">
                                   <input class="btn" type="button" style="height:20px" onClick="preview();" value="{!JSENCODE($Label.Apply)}" id="applyBtn" />
                                </div>
                           </td>
                        </tr>
                  </table>
               </td>
              
           </tr>
           
        </table>
        <br/><hr style="color:#E0E0E0;border: 0; border-top: 1px solid #E0E0E0;"/>
        <table id="previewSection" width="98%" style="margin-left:10px">
            <tr class="editThemeTitle">
               <td>{!JSENCODE($Label.SSEditThemePreviewTitle)}</td>
            </tr>           
            <tr>
               <td>
                   <br/> <apex:iframe id="previewPage" src="/apex/SSLandingPage?previewList={}" frameborder="true"/>
               </td>
           </tr>
        </table>
        <script>
        	preview();
        	window.opener.parent.addHelpOnPage(document.getElementById('helpDiv'),'creating_customtheme.htm', '');
        </script>
         <apex:actionFunction action="{!save}" name="save" rerender="" oncomplete="loadThemeData('{!themeDataTemp}');SaveOnComplete('{!isError}');">
             <apex:param name="themeName" assignTo="{!themeName}" value=""/>
             <apex:param name="themeColorData" assignTo="{!themeDataTemp}" value=""/>
         </apex:actionFunction>
          <apex:actionFunction action="{!deleteTheme}" name="deleteTheme" rerender="" onComplete="window.opener.location.href = window.opener.location.href;window.close();" >
          </apex:actionFunction>
    </apex:form>
    
</apex:page>